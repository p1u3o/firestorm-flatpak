{
  "app-id": "org.firestormviewer.FirestormViewer",
  "branch": "stable",
  "runtime": "org.freedesktop.Platform",
  "runtime-version": "18.08",
  "sdk": "org.freedesktop.Sdk",
  "command": "firestorm-viewer",
  "separate-locales": false,
  "finish-args": [
    "--share=ipc", "--socket=x11", "--socket=wayland",
    "--socket=pulseaudio",
    "--share=network",
    "--device=all",
    "--filesystem=xdg-documents",
    "--filesystem=xdg-download",
    "--filesystem=xdg-desktop",
    "--filesystem=xdg-music",
    "--filesystem=xdg-pictures",
    "--filesystem=xdg-videos",
    "--persist=.firestorm",
    "--persist=.firestorm_x64",
    "--talk-name=org.freedesktop.Notifications",
    "--own-name=com.secondlife.ViewerAppAPIService"
  ],
  "cleanup": [
    "/share/man",
    "/share/doc",
    "/share/gtk-doc",
    "/lib/pkgconfig",
    "/lib/debug"
  ],
  "modules": [
    {
      "name": "firestormviewer",
      "buildsystem": "simple",
      "cleanup": "viewer.tar.xz",
      "sources": [
        {
        "type": "file",
        "only-arches": ["x86_64"],
        "dest-filename": "viewer.tar.xz",
        "url": "http://downloads.firestormviewer.org/linux/Phoenix_FirestormOS-Releasex64_x86_64_6.0.2.56680.tar.xz",
        "md5": "c11857b11dbb4a4accfc785529d63451"
        },
        {
	"type": "file",
        "only-arches": ["i386"],
        "dest-filename": "viewer.tar.xz",
        "url": "http://downloads.firestormviewer.org/linux/Phoenix_FirestormOS-Release_i686_6.0.2.56680.tar.xz",
        "md5": "9e20172f32789f68671c0be8bcdd8315"
        },
        {
          "type": "file",
          "path": "firestorm-viewer"
	},
        {
           "type": "file",
           "path": "launch_url.sh"
        },
        {
           "type": "file",
           "path": "org.firestormviewer.FirestormViewer.desktop"
        },
        {
           "type": "file",
           "path": "org.firestormviewer.FirestormViewer.handler.desktop"
        }
      ],

      "build-commands": [
        "mkdir -p /app/lib/i386-linux-gnu /app/lib/debug/lib/i386-linux-gnu",
        "install -d /app/firestorm",
        "tar -xvf viewer.tar.xz --strip 1 -C /app/firestorm",
        "install -d /app/bin",
        "install -Dm755 firestorm-viewer /app/bin/",
        "install -d /app/share/icons/hicolor/512x512/apps/",
        "install -Dm644 /app/firestorm/firestorm_icon.png /app/share/icons/hicolor/512x512/apps/org.firestormviewer.FirestormViewer.png",
        "install -Dm755 launch_url.sh /app/firestorm/etc",
        "install -d /app/share/applications",
        "touch org.firestormviewer.FirestormViewer.desktop",
        "install -m644 org.firestormviewer.FirestormViewer.desktop /app/share/applications/org.firestormviewer.FirestormViewer.desktop"
      ],

      "modules": [
        "shared-modules/glu/glu-9.0.0.json",
        "shared-modules/gtk2/gtk2.json",
        "shared-modules/dbus-glib/dbus-glib-0.110.json",
        "shared-modules/libappindicator/libappindicator-gtk3-12.10.json",
        {
          "name": "libnotify",
          "cleanup": [ "/bin" ],
          "config-opts": [
              "--disable-static",
              "--disable-tests",
              "--disable-introspection"
          ],
          "sources": [
              {
                  "type": "archive",
                  "url": "https://download.gnome.org/sources/libnotify/0.7/libnotify-0.7.7.tar.xz",
                  "sha256": "9cb4ce315b2655860c524d46b56010874214ec27e854086c1a1d0260137efc04"
              }
          ]
      }
    ]
  }]
}
