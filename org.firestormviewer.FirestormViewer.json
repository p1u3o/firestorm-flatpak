{
  "app-id":"org.firestormviewer.FirestormViewer",
  "branch":"stable",
  "runtime":"org.freedesktop.Platform",
  "runtime-version":"19.08",
  "sdk":"org.freedesktop.Sdk",
  "command":"firestorm-viewer",
  "separate-locales":false,
  "finish-args":[
    "--share=ipc",
    "--socket=x11",
    "--socket=pulseaudio",
    "--share=network",
    "--allow=multiarch",
    "--device=dri",
    "--filesystem=xdg-documents",
    "--filesystem=xdg-download",
    "--filesystem=xdg-music",
    "--filesystem=xdg-pictures",
    "--persist=.firestorm_x64",
    "--persist=.wine",
    "--talk-name=org.freedesktop.Notifications",
    "--own-name=com.secondlife.ViewerAppAPIService"
  ],
  "cleanup":[
    "/share/man",
    "/share/doc",
    "/share/gtk-doc",
    "/lib/pkgconfig",
    "/lib/debug"
  ],
  "build-options":{
    "strip":true
  },
  "add-extensions":{
    "org.freedesktop.Platform.Compat.i386":{
      "directory":"lib/i386-linux-gnu",
      "version":"19.08"
    }
  },
  "sdk-extensions":[
    "org.freedesktop.Sdk.Compat.i386",
    "org.freedesktop.Sdk.Extension.toolchain-i386"
  ],
  "modules":[
    "shared-modules/glu/glu-9.0.0.json",
    "shared-modules/gtk2/gtk2.json",
    "shared-modules/dbus-glib/dbus-glib-0.110.json",
    "modules/wine.json",
    {
      "name":"libnotify",
      "cleanup":[
        "/bin"
      ],
      "config-opts":[
        "--disable-static",
        "--disable-tests",
        "--disable-introspection"
      ],
      "sources":[
        {
          "type":"archive",
          "url":"https://download.gnome.org/sources/libnotify/0.7/libnotify-0.7.7.tar.xz",
          "sha256":"9cb4ce315b2655860c524d46b56010874214ec27e854086c1a1d0260137efc04"
        }
      ]
    },
    {
      "name":"firestormviewer",
      "buildsystem":"simple",
      "cleanup":"viewer.tar.xz",
      "sources":[
        {
          "type":"file",
          "dest-filename":"viewer.tar.xz",
          "url":"http://downloads.firestormviewer.org/linux/Phoenix_Firestorm-releasex64_x86_64_6.2.4.57588.tar.xz",
          "sha256":"b2899152d880a50e3a4fd8f0f1ab035d9190d9293fa4f23cda82957a8083c27d"
        },
        {
          "type":"file",
          "path":"assets/firestorm-viewer"
        },
        {
          "type":"file",
          "path":"assets/launch_url.sh"
        },
        {
          "type":"file",
          "path":"assets/org.firestormviewer.FirestormViewer.desktop"
        },
        {
          "type":"file",
          "path":"assets/org.firestormviewer.FirestormViewer.appdata.xml"
        },
        {
          "type":"file",
          "path":"assets/org.firestormviewer.FirestormViewer-symbolic.svg"
        }
      ],
      "build-commands":[
        "mkdir /app/firestorm",
        "mkdir /app/lib/i386-linux-gnu",
        "tar -xvf viewer.tar.xz --strip 1 -C /app/firestorm",
        "install -Dm755 firestorm-viewer /app/bin/",
        "install -Dm644 /app/firestorm/firestorm_icon.png /app/share/icons/hicolor/512x512/apps/org.firestormviewer.FirestormViewer.png",
        "install -Dm644 org.firestormviewer.FirestormViewer-symbolic.svg /app/share/icons/hicolor/symbolic/apps/org.firestormviewer.FirestormViewer-symbolic.svg",
        "install -Dm755 launch_url.sh /app/firestorm/etc",
        "install -Dm644 org.firestormviewer.FirestormViewer.desktop /app/share/applications/org.firestormviewer.FirestormViewer.desktop",
        "install -Dm644 org.firestormviewer.FirestormViewer.appdata.xml /app/share/metainfo/org.firestormviewer.FirestormViewer.appdata.xml"
      ]
    }
  ]
}
